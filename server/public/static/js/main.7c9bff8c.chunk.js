(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{115:function(e,t,n){},116:function(e,t,n){"use strict";n.r(t);var c=n(12),a=n(3),r=n.n(a),s=n(75),l=n.n(s),o=n(16),i=(n(88),n(5)),j=n(32),m=n(33),d=n(35),b=n(34),u=n(10),p=n(1),O=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{children:"Me View"})}}]),n}(a.Component),h=n(55),x=n.n(h),g=n(76),f=n(29),v=n.n(f),y=Object(i.makeVar)(!!localStorage.getItem("token")),N=Object(i.makeVar)([]),A=Object(i.makeVar)(function(){var e=localStorage.getItem("page"),t="1";return e&&(t=e),t}()),w=new i.InMemoryCache({typePolicies:{Query:{fields:{isLoggedIn:{read:function(){return y()}},currPage:{read:function(){return A()}},favourites:{read:function(){return N()}}}}}}),k=function(){var e=Object(i.useApolloClient)();return Object(p.jsx)("button",{style:{padding:0},"data-testid":"logout-button",type:"button",className:"btn btn-secondary p-2",onClick:function(){e.cache.evict({fieldName:"me"}),e.cache.gc(),localStorage.removeItem("token"),localStorage.removeItem("userId"),y(!1)},children:"Logout"})};function C(){return Object(p.jsxs)("div",{className:"pb-5 mt-5",children:[Object(p.jsxs)("label",{htmlFor:"page-number",children:["Search people by page:\xa0",Object(p.jsx)("input",{type:"number",name:"page-number",id:"page-number",min:"1",max:"9",className:"ml-3",placeholder:A()})]}),Object(p.jsx)("input",{onClick:function(e){e.preventDefault();var t=document.getElementById("page-number");localStorage.setItem("page",t.value),A(t.value)},type:"button",value:"Submit"})]})}var I,S=n(83),M=n(28),B=Object(i.gql)(I||(I=Object(c.a)(["\n  mutation PostPerson($name: String!) {\n    postPersonWithName(name: $name) {\n      id\n      personId\n      name\n      postedById\n    }\n  }\n"])));function P(e){var t=e.name,n=Object(i.useMutation)(B,{onCompleted:function(e){e.postPersonWithName&&N([].concat(Object(S.a)(N()),[t]))}}),c=Object(M.a)(n,2),a=c[0],r=c[1],s=r.loading,l=r.error;return s?Object(p.jsx)("h4",{children:"Loading..."}):l?Object(p.jsx)("p",{children:"An error occurred"}):Object(p.jsxs)("div",{className:"d-flex p-3",children:["Like:\xa0",Object(p.jsx)("img",{className:"mt-n2",style:{cursor:"pointer"},role:"presentation",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAACjUlEQVRoge3ZSWsUURSG4afjFEGC4ByDiCiKEhe6FH+B/9elE4ouxDEuHBCNmHZAnKLtEBMXp7ssq7srVdWj2O+mu4Z76/su95y65xYTJkyYMOF/plbwvq3Yj1nMNI9r+IZl1PESnwr2N4M57MU2TGMNjWYfS83+Gr0a2IJjOIoNBYS9wm18yBE+jwMF+lrFUyzIMZJnYBfOChNlWMMtPMqcP4zTmCrZ3w9cxetOF7uN6iEhfmPJhxGDMovNYmrBKZxUfMqm2YCD+Ir3nS5m2Y0zyo9Ulp342fyd77GvmojBt/iSvZBmGufE6PWDtS7Pqcp3nBfJA+2jfEL/xBPC+yWeiMfj6RNpA1tFoI07R8RMwd8G5vQ+74fBlNCaHLTYN3wtlUm0pg3MjEBIVRKt2Rj4V0i0pg30M1sMmqm2P1K59R8gWRulDSyPQEhVEq1pA/UON44rida0gZcjEFKVRGvawCe8GL6W0izic+sg++a9JwqJcWUV99Mnssvp7yLC54wnN2VitVM98F6sSHcOQ1EJHuJB9mS3iqwuipFxWR8t4G6nC3mF+jsR2PuNbpW6ihva6+uE9XYaPuKNMFGlPu6FH7hinfReZKvkq9inaRXqw6CBi2IW5FLEAJGdnmOPwa9aP+CCVK7Po6gBWBEmthtc7VDHZTFghShjgAiqRVFc7yjZdj0e4zp+lWlU1kCLJZFm9+pPHbGAO1UaVjVABNg7kaGq9rOCa3hSVUQvBoh1+ZIwsalk2wYu6bLnWZReDRCV3KJyGaqVaYpux3elHwaIqfBMsQz1Sox84UyTR78MUCxDVco0efTTQIsl8fbe4U9cNMQ3g7bVZK8MciulJj4fEcG+lnPvhAkTKvIbYud6xdwWIyMAAAAASUVORK5CYII=",alt:"Like icon",onClick:function(){a({variables:{name:t}})}})]})}var E,q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAC6ElEQVRoge3YzWucVRTH8c+ZlBZF6UKkRLpSxKULX8tMXhqKFheVKIiCINnoHyD+AW6jEnTTXVGMom66EAuC1DGZGKKtgi+IqFlpC7VqE0RJjXNdOEobnidP5pl5zMLnuzzn3HN+v7l3LnOHmpqampr/M9FPcZowpmtaOKxrVLgRP+FrnDbi1Wj7dtse426VPI4p3IYbJD9qOC85LTkZHZ2hGkgtdwgvYKKgtCvM2/RMfOjCVT2arhfmhBk0Cvq08XQs+qRIW6GB1DIjHMe+otorOKfrwVhyBlLTnRrexM199NgQnooFr2xXtK2BnvgTfQy9kkuSSQ0NyfvYX7LPTCx6OS+ZayBNuEtXB3tLDobvejP6+eS3siFpRsfZrGT+WeyaM5h4uMVg4vn76M7lJTMNpJZJNAccPDzCWBo3npXK3oHwcKWCytD1UFY47whlut1VGtlXeJ6BgxVKKUfK1pRn4NoKpZTluqxgnoELOfHd5HxWMM/A5xUKKcuXWcE8A+9UKKQsmZqyDVz2Gn6pUk2frBnxRlYi00CsWBdmq9XUF7PRdikrkf9TouF5fFSVoj741G+ey0vmGoi2TcljdvdGumjEI3HWH3kF2z4somNVcgzrQ5dWzK8ajhW98IpeRqJjRXKf//ZLvY6j8YHlosJCA/RMhHvw1aDKdsCqEc1YtLST4h0ZgFjwjcvuFd4ur62AZNGfDkXbFztdsmMD9K7XA6Yxi9Svvm1IkhftMbX1z4BCTaUnthzBvHCgbI8ea8KTseCtMotLG4A06aBNrwtjJVt8LHk0OlbLaujrCG0l2r436rDwLLp9LE3CS37WGkQ8A+7AVYrGTUnmMVpQelF4IhacGsbcoRmA1HSThlO4PafkM5seiGU/DGvmQEdoK7HknBGTksWM9Iq9poYpniHvwD+kQ66xx0nc3wu9a9N0LPt92LMqMQDpiP02nEHXPnfHe9aqmlUZqeVoGvt3F2pqampqaobOX8UGtOavmkzUAAAAAElFTkSuQmCC",L=Object(i.gql)(E||(E=Object(c.a)(["\n  mutation deletePerson($name: String!) {\n    deletePersonWithName(name: $name) {\n      name\n    }\n  }\n"])));function F(e){var t=e.name,n=Object(i.useMutation)(L,{onCompleted:function(e){e.deletePersonWithName&&N(N().filter((function(e){return e!==t})))}}),c=Object(M.a)(n,2),a=c[0],r=c[1],s=r.loading,l=r.error;return s?Object(p.jsx)("h4",{children:"Loading..."}):l?Object(p.jsx)("p",{children:"An error occurred"}):Object(p.jsxs)("div",{className:"d-flex",children:["Unlike:\xa0",Object(p.jsx)("img",{className:"mt-n2",role:"presentation",src:q,alt:"Like icon",style:{cursor:"pointer"},onClick:function(){a({variables:{name:t}})}})]})}var V,G,R=function(e){var t=e.person,n=t.name,c=t.height,a=t.gender,r=t.homeworld,s=Object(i.useReactiveVar)(N),l=!!n&&s.includes(n),j=l?"&favourite=true":"";return Object(p.jsx)("div",{className:"card card-body mb-3",children:Object(p.jsxs)("div",{className:"row d-flex",children:[Object(p.jsxs)("div",{className:"col-md-6",children:[Object(p.jsxs)("h4",{children:["Name:\xa0",Object(p.jsx)("span",{children:n})]}),Object(p.jsxs)("p",{children:["Height:\xa0",c]}),Object(p.jsxs)("p",{children:["Gender:\xa0",a]}),Object(p.jsxs)("p",{children:["Homeworld:\xa0",r]})]}),Object(p.jsxs)("div",{className:"col-md-6 d-md-flex justify-content-md-between",children:[Object(p.jsx)("div",{children:l?Object(p.jsx)(F,{name:n}):Object(p.jsx)(P,{name:n})}),Object(p.jsx)("div",{children:Object(p.jsx)(o.b,{to:"/person/?search=".concat(n).concat(j),className:"btn btn-secondary",children:"Person Details"})})]})]})})},K=n(58),D=n(81),U=Object(D.a)((function(e,t){var n=t.headers,c=localStorage.getItem("token");return{headers:Object(K.a)(Object(K.a)({},n),{},{authorization:c?"Bearer ".concat(c):""})}}));function H(){var e=parseInt(A(),10);return Object(p.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:[e>1?Object(p.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(t){t.preventDefault(),A("".concat(e-1))},children:"Prev"}):null,Object(p.jsx)("button",{type:"button",className:"btn btn-secondary",children:"".concat(e)}),e<9?Object(p.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(t){t.preventDefault(),A("".concat(e+1))},children:"Next"}):null]})}n(100);var W,T=Object(i.gql)(V||(V=Object(c.a)(["\n  query People($page: Int) {\n    people(page: $page) {\n      name\n      height\n      gender\n      homeworld\n    }\n  }\n"]))),Z=Object(i.gql)(G||(G=Object(c.a)(["\n  query currentPage {\n    currPage @client\n  }\n"]))),Q=function(){var e=Object(g.a)(x.a.mark((function e(){var t,n,c,a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,fetch("/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({query:"\n  query {\n    myPeople {\n      id\n      personId\n      name\n      postedById\n    }\n  }\n"})});case 3:return n=e.sent,e.next=6,n.json();case 6:return c=e.sent,a=c.data.myPeople,console.log(a),r=[],a.forEach((function(e){return r.push(e.name)})),N(r),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(i.useQuery)(Z).data.currPage,t=Object(i.useQuery)(T,{context:U,variables:{page:parseInt(e,10)},onCompleted:function(e){e.people&&Q().catch((function(e){console.log("Error: ",e)}))}}),n=t.loading,c=t.error,a=t.data;return n?Object(p.jsx)("p",{children:"Loading..."}):c?Object(p.jsx)("p",{children:"Error :( ".concat(c)}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{style:{padding:"5px",textAlign:"center",borderRadius:"50%"},children:[Object(p.jsx)(k,{}),Object(p.jsx)(C,{}),Object(p.jsx)(H,{})]}),Object(p.jsx)("h4",{className:"display-4 my-3",children:"People"}),Object(p.jsx)(p.Fragment,{children:a.people.map((function(e){return Object(p.jsx)(R,{person:e},"".concat(e.name,"-").concat(v()()))}))}),Object(p.jsx)("div",{style:{textAlign:"center"},className:"mb-3",children:Object(p.jsx)(H,{})})]})},J=n(82),X=n.n(J),z=function(e){var t=e.link;return Object(p.jsx)("h6",{children:"<".concat(t,">")})};function $(){return Object(p.jsx)("div",{style:{textAlign:"center"},children:Object(p.jsx)(o.b,{to:"/",className:"btn btn-secondary",children:"Back"})})}function _(){return Object(p.jsxs)("div",{className:"d-flex m-md-0 m-1",children:["Is a favourite:\xa0",Object(p.jsx)("img",{className:"mt-n2",role:"presentation",src:q,alt:"Like icon"})]})}var ee=Object(i.gql)(W||(W=Object(c.a)(["\n  query PersonDetails($name: String!) {\n    personDetails(name: $name) {\n      name\n      height\n      gender\n      homeworld\n      eyeColor\n      hairColor\n      skinColor\n      films\n      species\n      vehicles\n      starships\n      url\n    }\n  }\n"]))),te=function(e){var t=e.location,n=!1,c=X.a.parse(t.search),a=c.search;c.favourite&&(n=!0);var r=Object(i.useQuery)(ee,{variables:{name:a},context:U}),s=r.loading,l=r.error,o=r.data;if(s)return Object(p.jsx)("p",{children:"Loading..."});if(l)return Object(p.jsx)("p",{children:"Error :( ".concat(l)});var j=o.personDetails,m=j.name,d=j.height,b=j.gender,u=j.homeworld,O=j.eyeColor,h=j.hairColor,x=j.skinColor,g=j.films,f=j.species,y=j.vehicles,N=j.starships,A=j.url;return Object(p.jsxs)("div",{className:"pt-5 mb-3",children:[Object(p.jsx)($,{}),Object(p.jsxs)("div",{className:"d-md-flex justify-content-md-between",children:[Object(p.jsxs)("h1",{className:"display-4 my-5",children:[Object(p.jsx)("span",{className:"text-dark",children:"Name: "}),m]}),Object(p.jsx)("div",{className:"p-md-5",children:n?Object(p.jsx)(_,{}):null})]}),Object(p.jsx)("h4",{className:"mb-3",children:"Person Details"}),Object(p.jsxs)("p",{children:["Height:\xa0",d]}),Object(p.jsxs)("p",{children:["Gender:\xa0",b]}),Object(p.jsxs)("p",{children:["Homeworld:\xa0",u]}),Object(p.jsxs)("ul",{className:"list-group",children:[Object(p.jsxs)("li",{className:"list-group-item",children:["Eye color:\xa0",O]}),Object(p.jsxs)("li",{className:"list-group-item",children:["Hair color:\xa0",h]}),Object(p.jsxs)("li",{className:"list-group-item",children:["Skin color:\xa0",x]})]}),Object(p.jsx)("h4",{className:"my-3",children:"More details"}),Object(p.jsxs)("ul",{className:"list-group",children:[Object(p.jsxs)("li",{className:"list-group-item",children:["Films:",g.map((function(e){return Object(p.jsx)(z,{link:e},"film-".concat(v()()))}))]}),Object(p.jsxs)("li",{className:"list-group-item",children:["Species:",f.map((function(e){return Object(p.jsx)(z,{link:e},"species-".concat(v()()))}))]}),Object(p.jsxs)("li",{className:"list-group-item",children:["Vehicles:",y.map((function(e){return Object(p.jsx)(z,{link:e},"vehicle-".concat(v()()))}))]}),Object(p.jsxs)("li",{className:"list-group-item",children:["Starships:",N.map((function(e){return Object(p.jsx)(z,{link:e},"vehicle-".concat(v()()))}))]})]}),Object(p.jsxs)("h4",{className:"mb-3",children:["Person Url:",Object(p.jsx)(z,{link:A})]}),Object(p.jsx)("hr",{}),Object(p.jsx)($,{})]})},ne=n.p+"static/media/star-wars-logo.057103d6.svg";n(115);var ce,ae,re=function(){return Object(p.jsx)("div",{className:"header",children:Object(p.jsx)("img",{src:ne,alt:"StarWars",style:{width:"300px",margin:"auto",display:"block"}})})},se=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)(re,{}),Object(p.jsx)(u.a,{exact:!0,path:"/me",component:O}),Object(p.jsx)(u.a,{exact:!0,path:"/",component:Y}),Object(p.jsx)(u.a,{exact:!0,path:"/people",component:Y}),Object(p.jsx)(u.a,{exact:!0,path:"/person",component:te})]})}}]),n}(a.Component),le=function(){return Object(p.jsx)(o.b,{to:"/register",className:"btn btn-secondary",children:"Register"})},oe=Object(i.gql)(ce||(ce=Object(c.a)(["\n  mutation Login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      id\n      token\n    }\n  }\n"]))),ie=function(){var e=Object(u.e)(),t=Object(i.useMutation)(oe,{onCompleted:function(t){var n=t.login;n&&(localStorage.setItem("token",n.token),localStorage.setItem("userId",n.id),y(!0),e.push("/"))}}),n=Object(M.a)(t,2),c=n[0],a=n[1],r=a.loading,s=a.error;return r?Object(p.jsx)("h4",{children:"Loading..."}):s?Object(p.jsx)("p",{children:"An error occurred"}):Object(p.jsx)("div",{className:"row m-md-0 m-5 d-flex justify-content-center form mt-5 pb-5",children:Object(p.jsxs)("div",{className:"col-md-3",children:[Object(p.jsx)("h4",{className:"ml-n3",children:"Login"}),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("form",{id:"login",className:"d-flex flex-column",children:[Object(p.jsxs)("label",{htmlFor:"email",className:"row d-flex flex-column",children:["Email:",Object(p.jsx)("input",{className:"col-md-10",type:"email",name:"email",id:"email"})]}),Object(p.jsxs)("label",{htmlFor:"password",className:"row mb-3 mt-3",children:["Password:",Object(p.jsx)("input",{className:"col-md-10",type:"password",name:"password",id:"password"})]}),Object(p.jsx)("input",{type:"submit",value:"Submit",className:"form-elements btn btn-secondary",onClick:function(e){e.preventDefault();var t=document.getElementById("email"),n=document.getElementById("password");c({variables:{email:t.value,password:n.value}})}})]})}),Object(p.jsx)(le,{})]})})},je=function(){return Object(p.jsx)(o.b,{to:"/login",className:"btn btn-secondary",children:"Login"})},me=Object(i.gql)(ae||(ae=Object(c.a)(["\n  mutation Signup($email: String!, $password: String!, $name: String!) {\n    signup(email: $email, password: $password, name: $name) {\n      id\n      token\n    }\n  }\n"])));function de(){var e=Object(u.e)(),t=Object(i.useMutation)(me,{onCompleted:function(t){var n=t.signup;n&&(localStorage.setItem("token",n.token),localStorage.setItem("userId",n.id),y(!0),e.push("/"))}}),n=Object(M.a)(t,2),c=n[0],a=n[1],r=a.loading,s=a.error;return r?Object(p.jsx)("h4",{children:"Loading..."}):s?Object(p.jsx)("p",{children:"An error occurred"}):Object(p.jsx)("div",{className:"row m-md-0 m-5 d-flex justify-content-center form mt-5 pb-5",children:Object(p.jsxs)("div",{className:"col-md-3",children:[Object(p.jsx)("h4",{className:"ml-n3",children:"Register"}),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("form",{id:"login",className:"d-flex flex-column",children:[Object(p.jsxs)("label",{htmlFor:"email",className:"row d-flex flex-column",children:[Object(p.jsx)("p",{children:"Email:"}),Object(p.jsx)("input",{className:"col-md-10",type:"email",name:"email",id:"email"})]}),Object(p.jsxs)("label",{htmlFor:"password",className:"row d-flex flex-column mb-3 mt-3",children:[Object(p.jsx)("p",{children:"Password:"}),Object(p.jsx)("input",{className:"col-md-10",type:"password",name:"password",id:"password"})]}),Object(p.jsxs)("label",{htmlFor:"password",className:"row d-flex flex-column mb-3 mt-3",children:[Object(p.jsx)("p",{children:"Confirm password:"}),Object(p.jsx)("input",{className:"col-md-10",type:"password",name:"confirm-password",id:"confirm-password"})]}),Object(p.jsxs)("label",{htmlFor:"name",className:"row d-flex flex-column mb-3 mt-3",children:[Object(p.jsx)("p",{children:"Name:"}),Object(p.jsx)("input",{className:"col-md-10",type:"text",name:"name",id:"name"})]}),Object(p.jsx)("input",{type:"submit",value:"Submit",className:"form-elements btn btn-secondary",onClick:function(e){e.preventDefault();var t=document.getElementById("email"),n=document.getElementById("password"),a=document.getElementById("name");c({variables:{email:t.value,password:n.value,name:a.value}})}})]})}),Object(p.jsx)(je,{})]})})}var be,ue,pe=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)(re,{}),Object(p.jsx)(u.a,{exact:!0,path:"/register",component:de}),Object(p.jsx)(u.a,{exact:!0,path:"/",component:ie}),Object(p.jsx)(u.a,{exact:!0,path:"/login",component:ie})]})}}]),n}(a.Component),Oe=Object(i.gql)(be||(be=Object(c.a)(["\n  extend type Query {\n    isLoggedIn: Boolean!\n  }\n"]))),he=new i.ApolloClient({cache:w,uri:"/graphql",headers:{authorization:localStorage.getItem("token")||"","client-name":"Star Wars [web]","client-version":"1.0.0"},typeDefs:Oe,resolvers:{}}),xe=Object(i.gql)(ue||(ue=Object(c.a)(["\n  query IsUserLoggedIn {\n    isLoggedIn @client\n  }\n"])));function ge(){return Object(i.useQuery)(xe).data.isLoggedIn?Object(p.jsx)(se,{}):Object(p.jsx)(pe,{})}l.a.render(Object(p.jsx)(i.ApolloProvider,{client:he,children:Object(p.jsx)(o.a,{children:Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(ge,{})})})}),document.getElementById("root"))},88:function(e,t,n){}},[[116,1,2]]]);
//# sourceMappingURL=main.7c9bff8c.chunk.js.map